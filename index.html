<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Penipu Dana</title>
    <link rel="icon" type="image/x-icon" href="img/dana.jpeg" />
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH"
      crossorigin="anonymous"
    />
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css"
    />
  </head>
  <body>
    <div class="container">
      <div class="row mt-5 m-auto">
        <div class="col-lg-6">
          <form method="post">
            <div class="row">
              <div class="card shadow p-3 mb-5 bg-white rounded">
                <h3 class="text-center">
                  Penipu Dana
                  <img
                    src="img/dana.jpeg"
                    class="img-thumbnail"
                    style="width: 100px; height: 100px; border-radius: 50%"
                  />
                </h3>
                <div class="card-body">
                  <div class="col">
                    <div class="mb-3">
                      <label for="token" class="form-label"
                        >Masukkan token :</label
                      >
                      <input
                        type="text"
                        class="form-control"
                        id="token"
                        name="token"
                        value="8343507503:AAH9DS4uiSAX6zyR1MoSzPXlHQNuWBin_z8"
                        required
                      />
                    </div>
                    <div class="mb-3">
                      <label for="chat_id" class="form-label"
                        >Masukkan chat id :</label
                      >
                      <input
                        type="text"
                        class="form-control"
                        id="chat_id"
                        name="chat_id"
                        value="6138569821"
                        required
                      />
                    </div>
                    <div class="mb-3">
                      <label for="jmlPesan" class="form-label"
                        >Masukkan jumlah pesan :</label
                      >
                      <input
                        type="text"
                        class="form-control"
                        id="jmlPesan"
                        name="jmlPesan"
                        required
                      />
                    </div>
                    <div class="mb-3">
                      <label for="text" class="form-label"
                        >Masukkan pesan ke penipu :</label
                      >
                      <input
                        type="text"
                        class="form-control"
                        id="text"
                        name="text" value="SELAMAT MALAM BOSSKU!!!"
                        required
                      />
                    </div>

                    <div class="d-flex justify-content-end align-items-center">
                      <button
                        type="submit"
                        name="kirim"
                        class="btn btn-primary mt-3"
                        id="kirim"
                      >
                        Kirim
                      </button>
                      <button
                        type="button"
                        name="hapus"
                        class="btn btn-danger mt-3 mx-3"
                        id="hapus"
                      >
                        Hapus
                      </button>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </form>
        </div>

        <div class="col-lg-6">
          <div class="card text-center shadow bg-white rounded">
            <div class="card-header">Hasil</div>
            <div class="mb-3 mt-3" id="hasil"></div>
            <div class="card-footer text-body-secondary">
              <div class="penipu"></div>
            </div>
          </div>
        </div>
      </div>
    </div>
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
      crossorigin="anonymous"
    ></script>
    <script>
        let form = document.getElementsByTagName("form")[0];
let hasil = document.querySelector("#hasil");
let hapus = document.getElementById("hapus");
let penipu = document.querySelector(".penipu");
let count = 1;

form.addEventListener("submit", function (e) {
  e.preventDefault();

  let token = document.getElementById("token").value;
  let chat_id = document.getElementById("chat_id").value;
  let jmlPesan = document.getElementById("jmlPesan").value;
  let text = document.getElementById("text").value;

  for (let i = 1; i <= jmlPesan; i++) {
    let newParagraph = document.createElement("p");
    const API_PENIPU = `https://api.telegram.org/bot${token}/sendMessage?chat_id=${chat_id}&text=${text}&parse_mode=html`;

    fetch(API_PENIPU, {
      method: "POST",
      headers: {
        "Content-Type": "application/x-www-form-urlencoded",
      },
    })
      .then((response) =>
        response
          .json()
          .then((data) => ({ status: response.status, body: data }))
      )
      .then((data) => {
        if (data.status === 200) {
          penipu.innerHTML = `<i class="bi bi-telegram"></i> Nama : ${data.body.result.from.first_name}
            | Bot : <a href="https://t.me/${data.body.result.from.username}">${data.body.result.from.username}</a>`;
          newParagraph.textContent = `${count} : Pesan '${text}' berhasil di kirim dengan status response ${data.status}`;
          hasil.appendChild(newParagraph);
          count++;
        } else {
          newParagraph.textContent = `${count} : Pesan '${text}' gagal di kirim dengan status response ${data.status}`;
          hasil.appendChild(newParagraph);
          count++;
        }
      })
      .catch((error) => {
        newParagraph.textContent = `${count} : error ${error.message}`;
        hasil.appendChild(newParagraph);
        count++;
      });
  }

  hapus.addEventListener("click", function () {
    if (hasil) {
      hasil.textContent = "";
      penipu.innerHTML = "";
      count = 1;
    }
  });
});

    </script>
  </body>
</html>
